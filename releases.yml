releases:
  ec.2:
    assembly:
      type: preview
      basis:
        time: "2025-05-26T07:41:37+00:00"  # required for konflux image advisories prep
        brew_event: 63905880  # required for brew rpm advisories prep
        reference_releases:
          x86_64: 4.20.0-0.nightly-2025-05-26-181128
      group:
        advisories:
          rpm: 149403
          prerelease: 150366
        operator_index_mode: pre-release
        release_jira: ART-12824
        shipment:
          advisories:
            - kind: image
            - kind: extras
            - kind: metadata
        upgrades: 4.20.0-ec.0,4.19.0-rc.4,4.19.0-rc.3,4.19.0-rc.2,4.19.0-rc.1,4.19.0-rc.0
      permits:
        # for ECs and RCs this should not block us if some rpms version not match desired
        - code: CONFLICTING_INHERITED_DEPENDENCY
          component: 'openshift-enterprise-builder'
        - code: CONFLICTING_INHERITED_DEPENDENCY
          component: 'rhcos'
        - code: CONFLICTING_GROUP_RPM_INSTALLED
          component: 'rhcos'
      rhcos:
        rhel-coreos:
          images:
            x86_64: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:76209f29fa05f7401b5bc87dfc6b02ba05be967e89c9f9cf05516f11b09c257b
            aarch64: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:3cd171d8807fd993cc8f913f55bb33b97b35fb40a0a697ad4b6e9f486452a592
            s390x: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:daa68573a562d291e3eda9a6be02020214eaf761a6879bbd66e2ddcdb8f0da91
            ppc64le: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:35c82bca6a2d5a09555282620aeceae44e7641e9f66a5b8e93264a0b0c2afc1f
        rhel-coreos-extensions:
          images:
            x86_64: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:31aa20a1c3b7d965092f9fa5ee56a51be3ff7c1437be227ed7af2503b6ead641
            aarch64: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:815611e279e2a2831ee1950da1070755631b33fd949bf9938316636bd17be60b
            s390x: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:7594a50a3fef80741ddc4e90c3b306be3229cb0e93d3ca60c8f232d374b2cef0
            ppc64le: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:fb38d6b19b0199512ad91303b445b2f368e3a6caa27a6fee603c87e82f80444c
      members:
        rpms:
          - distgit_key: microshift
            why: Pin microshift to assembly
            metadata:
              is:
                el9: microshift-4.20.0~ec.2-202506181056.p0.g1fdfec0.assembly.ec.2.el9
        images: []
  ec.1:
    assembly:
      type: preview
      basis:
        time: "2025-05-26T07:41:37+00:00"
        brew_event: 63905880
        reference_releases:
          x86_64: 4.20.0-0.nightly-2025-05-26-181128
      group:
        advisories:
          rpm: 149403
          prerelease: 150366
        operator_index_mode: pre-release
        release_jira: ART-12824
        shipment:
          advisories:
            - kind: image
            - kind: extras
            - kind: metadata
        upgrades: 4.19.0-rc.4, 4.20.0-ec.0
      permits:
      # for ECs and RCs this should not block us if some rpms version not match desired
        - code: CONFLICTING_INHERITED_DEPENDENCY
          component: 'openshift-enterprise-builder'
        - code: CONFLICTING_INHERITED_DEPENDENCY
          component: 'rhcos'
        - code: CONFLICTING_GROUP_RPM_INSTALLED
          component: 'rhcos'
      rhcos:
        rhel-coreos:
          images:
            x86_64: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:76209f29fa05f7401b5bc87dfc6b02ba05be967e89c9f9cf05516f11b09c257b
            aarch64: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:3cd171d8807fd993cc8f913f55bb33b97b35fb40a0a697ad4b6e9f486452a592
            s390x: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:daa68573a562d291e3eda9a6be02020214eaf761a6879bbd66e2ddcdb8f0da91
            ppc64le: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:35c82bca6a2d5a09555282620aeceae44e7641e9f66a5b8e93264a0b0c2afc1f
        rhel-coreos-extensions:
          images:
            x86_64: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:31aa20a1c3b7d965092f9fa5ee56a51be3ff7c1437be227ed7af2503b6ead641
            aarch64: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:815611e279e2a2831ee1950da1070755631b33fd949bf9938316636bd17be60b
            s390x: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:7594a50a3fef80741ddc4e90c3b306be3229cb0e93d3ca60c8f232d374b2cef0
            ppc64le: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:fb38d6b19b0199512ad91303b445b2f368e3a6caa27a6fee603c87e82f80444c
      members:
        rpms: []
        images:
          - distgit_key: ose-insights-operator
            why: Pin commit due to source commit conflict in upstream repo
            metadata:
              is:
                nvr: ose-insights-operator-container-v4.20.0-202505210258.p0.g231bf07.assembly.stream.el9
              content:
                source:
                  git:
                    branch:
                      target: 231bf07325dc47797b788ec90407d9db1a733211

  ec.0:
    assembly:
      basis:
        brew_event: 63636187
        reference_releases:
          x86_64: 4.20.0-0.nightly-2025-05-05-111655
      group:
        advisories:
          extras: 149399
          image: 149400
          metadata: 149401
          prerelease: 149402
          rpm: 149403
        operator_index_mode: pre-release
        release_jira: ART-12824
        upgrades: 4.19.0-rc.0
      permits:
      # for ECs and RCs this should not block us if some rpms version not match desired
        - code: CONFLICTING_INHERITED_DEPENDENCY
          component: 'openshift-enterprise-builder'
        - code: CONFLICTING_INHERITED_DEPENDENCY
          component: 'ose-agent-installer-node-agent'
        - code: CONFLICTING_INHERITED_DEPENDENCY
          component: 'ose-frr'
        - code: MISMATCHED_SIBLINGS  # ose-installer-altinfra-container removed
          component: 'ose-baremetal-installer'
        - code: MISMATCHED_SIBLINGS  # ose-installer-altinfra-container removed
          component: 'ose-installer'
        - code: MISMATCHED_SIBLINGS  # ose-installer-altinfra-container removed
          component: 'ose-installer-artifacts'
        - code: CONFLICTING_INHERITED_DEPENDENCY
          component: 'rhcos'
        - code: INCONSISTENT_RHCOS_RPMS
          component: 'rhcos'
        - code: CONFLICTING_GROUP_RPM_INSTALLED
          component: 'rhcos'
      members:
        images: []
        rpms: []
      rhcos:
        rhel-coreos:
          images:
            aarch64: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:2d9e706d53614137357f1e50d46104781a0e968705537e86e5253a754880a8fc
            ppc64le: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:e3953839dab7e45d0717d4b3f532acd464d7ac23bc30e231ea3a1ecd3b751991
            s390x: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:1034d27601f7a611b04592706c4de7e08a2b3c20ab202b01e5ecfc66a38fac40
            x86_64: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:496ae2e11ca3fb7fc9ba9ba0be6c22d444b78a429eaf0c528cd53cfff7b3ca96
        rhel-coreos-extensions:
          images:
            aarch64: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:59b9cf26186f8c1c4767e50f9a3a5eee56674afd5bb9fece591164dc5ee2f672
            ppc64le: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b6b3442f30f9daf8166efc4f4bc4d9e12094bad17e3078c64811aa741f6d79f3
            s390x: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:25fe99a2c66498d1e6b7a99e39509122491347f305c201a1e1c3502a795a8567
            x86_64: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:a3e23fbb663a8cf5ce07b0409629246288817c259f4dab6d99692e66828db2db
      type: preview

  stream:
    assembly:
      type: stream
      permits:
        - code: OUTDATED_RPMS_IN_STREAM_BUILD
          component: '*'
        - code: CONFLICTING_GROUP_RPM_INSTALLED
          component: rhcos
        - code: CONFLICTING_GROUP_RPM_INSTALLED
          component: openshift-clients
        - code: CONFLICTING_GROUP_RPM_INSTALLED
          component: local-storage-mustgather
        # RHCOS extensions temporarily use inconsistent RPMs between arches.
        # ref. https://redhat-internal.slack.com/archives/C01CQA76KMX/p1738863088399379
        - code: INCONSISTENT_RHCOS_RPMS
          component: rhcos
      members:
        images:
          - distgit_key: '*'
            why: Exclude rpm updates that should not cause mass rebuilds
            metadata:
              scan_sources:
                exempt_rpms:
                  - redhat-release* # documents rhel release notes and concerns
                  - tzdata
                  # Temporary to prevent mass rebuilds
                  - libgcrypt
                  - "openssl*"
                  - "*libc*"
