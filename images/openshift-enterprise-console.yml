content:
  source:
    dockerfile: Dockerfile.product
    git:
      branch:
        target: release-{MAJOR}.{MINOR}
      url: git@github.com:openshift-priv/console.git
      web: https://github.com/openshift/console
    modifications:
    - action: replace
      match: "COPY $REMOTE_SOURCES $REMOTE_SOURCES_DIR"
      replacement: |-
        COPY $REMOTE_SOURCES $REMOTE_SOURCES_DIR
        RUN touch $REMOTE_SOURCES_DIR/cachito-gomod-with-deps/app/registry-ca.pem $REMOTE_SOURCES_DIR/cachito-gomod-with-deps/app/frontend/.npmrc
    - action: replace
      match: "RUN container-entrypoint ./build-frontend.sh"
      replacement: "RUN source $REMOTE_SOURCES_DIR/cachito-gomod-with-deps/cachito.env && container-entrypoint ./build-frontend.sh"
    pkg_managers:
    #- gomod Take out go.mod processing because of STONEBLD-2479 not being supported
    - yarn
    artifacts:
      from_urls:
      - target: yarn-v1.22.22.tar.gz
        url: https://ocp-artifacts.engineering.redhat.com/github/yarnpkg/yarn/releases/download/v1.22.22/yarn-v1.22.22.tar.gz
        sha256: 88268464199d1611fcf73ce9c0a6c4d44c7d5363682720d8506f6508addf36a0
cachito:
  enabled: true
  packages:
    yarn:
    - path: frontend
distgit:
  branch: rhaos-{MAJOR}.{MINOR}-rhel-9
  component: openshift-enterprise-console-container
delivery:
  # Maps to honeybadger repo_name
  repo_name: ose-console
for_payload: true
from:
  builder:
  - stream: rhel-9-golang
  - member: openshift-base-nodejs.rhel9
  member: openshift-enterprise-base-rhel9
labels:
  License: GPLv2+
  io.k8s.description: This is a component of OpenShift Container Platform and provides a web console.
  io.k8s.display-name: OpenShift Console
  io.openshift.tags: openshift,console
name: openshift/ose-console-rhel9
payload_name: console
owners:
- spadgett@redhat.com
konflux:
  vm_override:
    x86_64: linux-d160-m2xlarge/amd64
    aarch64: linux-d160-m2xlarge/arm64
  cachito:
    mode: emulation
  cachi2:
    enabled: true
  network_mode: open
