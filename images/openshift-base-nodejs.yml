base_only: true
content:
  source:
    git:
      branch:
        target: openshift-base-nodejs
      url: git@github.com:openshift/ocp-build-data.git
    ci_alignment:
      streams_prs:
        enabled: false
      mirror: true
      upstream_image: registry.ci.openshift.org/ocp/builder:rhel-8-base-nodejs-openshift-{MAJOR}.{MINOR}
      upstream_image_base: registry.ci.openshift.org/ocp/builder:rhel-8-base-nodejs-openshift-{MAJOR}.{MINOR}.art
      transform: rhel-8/base-repos
      # the console build cares not, but just to keep us/ds same as possible, end with same USER:
      final_user: 1001
enabled_repos:
- rhel-8-baseos-rpms
- rhel-8-appstream-rpms

# Generally doozer scan-sources will detect all possible change factors automatically and trigger rebuilds.
# However, certain images may consume RPMs in unexpected way that make it programmatically impossible to
# detect they were used.
scan_sources:
  # This image excludes some package updates in Dockerfile.
  # We should configure exemptions for those known pins to avoid meaningless rebuild.
  # https://github.com/openshift-eng/ocp-build-data/blob/0fb79a4bfdfad72416f37f6a10e672d05b52ba9e/Dockerfile#L17
  exempted_packages:
  - nodejs
  - nodejs-docs
  - nodejs-full-i18n
  - npm

for_payload: false
for_release: false
from:
  stream: nodejs
labels:
  io.k8s.description: This image is only used in building the console image and not as a base for anything shipped.
name: openshift/base-nodejs
owners:
- aos-team-art@redhat.com
