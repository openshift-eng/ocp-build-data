arches:
- aarch64
- x86_64
content:
  source:
    dockerfile: Dockerfile.mrvlCPAgent.rhel
    git:
      branch:
        target: release-{MAJOR}.{MINOR}
      url: git@github.com:openshift-priv/dpu-operator.git
      web: https://github.com/openshift/dpu-operator
    ci_alignment:
      streams_prs:
        ci_build_root:
          member: ci-openshift-build-root-latest.rhel9
dependents:
- dpu-operator
distgit:
  branch: rhaos-{MAJOR}.{MINOR}-rhel-9
  component: dpu-marvell-cp-agent-container
enabled_repos:
- rhel-9-baseos-rpms
- rhel-9-appstream-rpms
- rhel-9-codeready-builder-rpms
delivery:
  repo_name: ose-dpu-marvell-cp-agent
  delivery_repo_names:
  - openshift4/ose-dpu-marvell-cp-agent-rhel9
for_payload: false
from:
  builder:
  - stream: rhel-9-golang
  member: openshift-enterprise-base-rhel9
name: openshift/ose-dpu-marvell-cp-agent-rhel9
name_in_bundle: dpu-marvell-cp-agent
owners:
- bnemeth@redhat.com
- wizhao@redhat.com
konflux:
  cachi2:
    lockfile:
      rpms:
      - glib2
      - glib2-devel
      - gcc-c++
      - libconfig-devel
      - libconfig
      - libstdc++-devel
      - iputils
      - kmod
      - net-tools
      - pciutils
      - hwdata
      - pciutils-libs
      - libxml2
      - libxml2-devel
      - openssl-libs
      - openssl
      - openssl-devel
      - systemd-libs
      - systemd-devel
okd:
  enabled_repos:  # needed by the golang-builder stage, removed in the next layer by the modifications below
  - rhel-9-baseos-rpms
  - rhel-9-appstream-rpms
  - rhel-9-codeready-builder-rpms
  content:
    source:
      modifications:
      - action: replace
        match: "COPY --from=stage1 /cpagent-bin/ /usr/bin/"
        replacement: |-
          COPY --from=stage1 /cpagent-bin/ /usr/bin/
          RUN rm /etc/yum.repos.d/art-*.repo
