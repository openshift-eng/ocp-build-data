content:
  source:
    git:
      branch:
        target: release-{MAJOR}.{MINOR}
      url: git@github.com:openshift-priv/ovn-kubernetes.git
enabled_repos:
- rhel-8-baseos-rpms
- rhel-8-appstream-rpms
- rhel-8-fast-datapath-rpms
- rhel-8-server-ose-rpms-embargoed

# Generally doozer scan-sources will detect all possible change factors automatically and trigger rebuilds.
# However, certain images may consume RPMs in unexpected way that make it programmatically impossible to
# detect they were used.
scan_sources:
  # ovn-kubernetes uses pins in the Dockerfile.
  # We should configure exemptions for those known pins to avoid meaningless rebuild.
  # https://github.com/openshift/ovn-kubernetes/blob/e236fea83d62de8b60b9456770a3e0b525830051/Dockerfile.base#L22
  exempted_packages:
  - openvswitch2.13
  - openvswitch2.13-devel
  - python3-openvswitch2.13
  - openvswitch2.13-ipsec
  - ovn2.13
  - ovn2.13-vtep
  - ovn2.13-host
  - ovn2.13-central

for_payload: true
from:
  builder:
  - stream: golang
  - stream: rhel-7-golang
  - member: openshift-enterprise-cli
  member: openshift-enterprise-base
labels:
  License: GPLv2+
  io.k8s.description: This is a component of OpenShift Container Platform that provides
    an overlay network using ovn.
  io.k8s.display-name: ovn kubernetes
  io.openshift.tags: openshift
  vendor: Red Hat
name: openshift/ose-ovn-kubernetes
owners:
- aos-networking-staff@redhat.com
