content:
  set_build_variables: false
  source:
    path: images
    dockerfile: openshift-golang-builder.Dockerfile
    git:
      branch:
        target: rhel-10-golang-1.24
      url: git@github.com:openshift-eng/ocp-build-data.git
    modifications:
    - &add_fips_wrapper
      action: add
      doozer_source: golang_builder_FIPS_wrapper.sh
      path: go_wrapper.sh
      overwriting: true
enabled_repos:
- rhel-10-baseos-rpms
- rhel-10-golang-rpms
# for clang
- rhel-10-appstream-rpms
- rhel-10-codeready-builder-rpms

from:
  stream: rhel10

labels:
  io.k8s.description: golang builder image for Red Hat internal builds

name: openshift/golang-builder

owners:
- aos-team-art@redhat.com

# for CPaaS
additional_tags:
- 'rhel_10_golang_1.24'
- 'rhel_10_1.24'
maintainer:
  component: Release

konflux:
  cachi2:
    artifact_lockfile:
      resources:
      - https://ocp-artifacts.engineering.redhat.com/pub/RHOCP/build-deps/openshift-golang-builder/cross.tar.gz
  network_mode: open
  content:
    source:
      modifications:
        - *add_fips_wrapper
        - action: replace
          match: "COPY cross.tar.gz "
          replacement: "RUN cp /cachi2/output/deps/generic/cross.tar.gz "
