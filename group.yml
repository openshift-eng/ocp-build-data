name: golang-1.16

arches:
- x86_64
- ppc64le
- s390x

vars:
  MAJOR: 4
  MINOR: 9

urls:
  brewhub: https://brewhub.engineering.redhat.com/brewhub
  brew_image_host: registry-proxy.engineering.redhat.com
  brew_image_namespace: rh-osbs
  cgit: http://pkgs.devel.redhat.com/cgit

insecure_source: true

# default branch because RPMs can't override (yet)
branch: rhaos-{MAJOR}.{MINOR}-rhel-7

# To prevent from being garbage collected, builds should be tagged with a -hotfix tag.
default_image_build_profile: unsigned
build_profiles:
  image:
    unsigned:
      signing_intent: unsigned
      repo_type: unsigned
      targets:
        - rhaos-{MAJOR}.{MINOR}-rhel-7-hotfix

# This should point to the buildroot compose for a maintained/current release of OpenShift.
# When the buildroot is bumped for a new version of go, the RPM should land in this repository
# and the image will need to be rebuilt.
repos:

  rhel-7-newer-golang-rpms:
    conf:
      baseurl:
        ppc64le: https://brew-task-repos.engineering.redhat.com/repos/official/go-toolset-1.16-golang/1.16.12/6.el7_9.0.0.1.hotfix.2.bz2213646/ppc64le/
        s390x:   https://brew-task-repos.engineering.redhat.com/repos/official/go-toolset-1.16-golang/1.16.12/6.el7_9.0.0.1.hotfix.2.bz2213646/s390x/
        x86_64:  https://brew-task-repos.engineering.redhat.com/repos/official/go-toolset-1.16-golang/1.16.12/6.el7_9.0.0.1.hotfix.2.bz2213646/x86_64/
    content_set:
      default: rhel-7-server-ose-{MAJOR}.{MINOR}-rpms
      ppc64le: rhel-7-for-power-le-ose-{MAJOR}.{MINOR}-rpms
      s390x: rhel-7-for-system-z-ose-{MAJOR}.{MINOR}-rpms
      optional: true

  # this needs to be named alphabetically first to pick up signed RPMs
  rhel-7-server-rpms:
    conf:
      baseurl:
        ppc64le: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/power-le/7/7Server/ppc64le/os/
        s390x: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/system-z/7/7Server/s390x/os/
        x86_64: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/server/7/7Server/x86_64/os/
    content_set:
      default: rhel-7-server-rpms
      ppc64le: rhel-7-for-power-le-rpms
      s390x: rhel-7-for-system-z-rpms

  rhel-server-ose-build-rpms:
    conf:
      baseurl:
        ppc64le: https://download-node-02.eng.bos.redhat.com/brewroot/repos/rhaos-{MAJOR}.{MINOR}-rhel-7-build/latest/ppc64le/
        s390x: https://download-node-02.eng.bos.redhat.com/brewroot/repos/rhaos-{MAJOR}.{MINOR}-rhel-7-build/latest/s390x/
        x86_64: https://download-node-02.eng.bos.redhat.com/brewroot/repos/rhaos-{MAJOR}.{MINOR}-rhel-7-build/latest/x86_64/
    content_set:
      default: rhel-7-server-ose-{MAJOR}.{MINOR}-rpms
      ppc64le: rhel-7-for-power-le-ose-{MAJOR}.{MINOR}-rpms
      s390x: rhel-7-for-system-z-ose-{MAJOR}.{MINOR}-rpms
      optional: true
