freeze_automation: no

arches:
- x86_64
- ppc64le
- s390x

operator_image_ref_mode: manifest-list

advisories:
  image: 0
  rpm: 0
  extras: 0
  metadata: 0
  # security:

build_profiles:
  image:
    unsigned:
      signing_intent: unsigned
      repo_type: unsigned
    signed:
      signing_intent: release
      repo_type: signed
  rpm:
    default:
      targets:
      - dummy-rhel-7-candidate
      - dummy-rhel-8-candidate

default_image_build_profile: unsigned
default_rpm_build_profile: default

branch: dummy-rhel-7
name: ci-deps
urls:
  brewhub: https://brewhub.engineering.redhat.com/brewhub
  brew_image_host: registry-proxy.engineering.redhat.com
  brew_image_namespace: rh-osbs
  cgit: https://pkgs.devel.redhat.com/cgit
# Is the `brew_image_host` source a secure endpoint or will
# --insecure=true be required?
insecure_source: true
dist_git_ignore:
  - gating.yaml
push:
  registries:
  - registry.reg-aws.openshift.com:443

repos:
  rhel-7-server-ansible-2.9-rpms:
    conf:
      baseurl:
        ppc64le: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/power-le/7/7Server/ppc64le/ansible/2.9/os/
        s390x: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/system-z/7/7Server/s390x/ansible/2.9/os/
        x86_64: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/server/7/7Server/x86_64/ansible/2.9/os/
    content_set:
      default: rhel-7-server-ansible-2.9-rpms
      ppc64le: rhel-7-server-ansible-2.9-for-power-le-rpms
      s390x: rhel-7-server-ansible-2.9-for-system-z-rpms
  rhel-7-server-ansible-2.8-rpms:
    conf:
      baseurl:
        ppc64le: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/power-le/7/7Server/ppc64le/ansible/2.8/os/
        s390x: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/system-z/7/7Server/s390x/ansible/2.8/os/
        x86_64: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/server/7/7Server/x86_64/ansible/2.8/os/
    content_set:
      default: rhel-7-server-ansible-2.8-rpms
      ppc64le: rhel-7-server-ansible-2.8-for-power-le-rpms
      s390x: rhel-7-server-ansible-2.8-for-system-z-rpms
  rhel-fast-datapath-rpms:
    conf:
      baseurl:
          ppc64le: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/power-le/7/7Server/ppc64le/fast-datapath/os/
          s390x: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/system-z/7/7Server/s390x/fast-datapath/os/
          x86_64: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/server/7/7Server/x86_64/fast-datapath/os/
    content_set:
      default: rhel-7-fast-datapath-rpms
      ppc64le: rhel-7-fast-datapath-for-power-le-rpms
      s390x: rhel-7-fast-datapath-for-system-z-rpms
  rhel-server-extras-rpms:
    conf:
      baseurl:
        ppc64le: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/power-le/7/7Server/ppc64le/extras/os/
        s390x: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/system-z/7/7Server/s390x/extras/os/
        x86_64: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/server/7/7Server/x86_64/extras/os/
    content_set:
      default: rhel-7-server-extras-rpms
      ppc64le: rhel-7-for-power-le-extras-rpms
      s390x: rhel-7-for-system-z-extras-rpms
  rhel-server-optional-rpms:
    conf:
      baseurl:
        ppc64le: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/power-le/7/7Server/ppc64le/optional/os/
        s390x: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/system-z/7/7Server/s390x/optional/os/
        x86_64: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/server/7/7Server/x86_64/optional/os/
    content_set:
      default: rhel-7-server-optional-rpms
      ppc64le: rhel-7-for-power-le-optional-rpms
      s390x: rhel-7-for-system-z-optional-rpms
  rhel-server-rhscl-rpms:
    conf:
      baseurl:
        ppc64le: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/power-le/7/7Server/ppc64le/rhscl/1/os/
        s390x: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/system-z/7/7Server/s390x/rhscl/1/os/
        x86_64: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/server/7/7Server/x86_64/rhscl/1/os/
    content_set:
      default: rhel-server-rhscl-7-rpms
      ppc64le: rhel-7-server-for-power-le-rhscl-rpms
      s390x: rhel-7-server-for-system-z-rhscl-rpms
  rhel-server-rpms:
    conf:
      baseurl:
        ppc64le: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/power-le/7/7Server/ppc64le/os/
        s390x: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/system-z/7/7Server/s390x/os/
        x86_64: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/server/7/7Server/x86_64/os/
    content_set:
      default: rhel-7-server-rpms
      ppc64le: rhel-7-for-power-le-rpms
      s390x: rhel-7-for-system-z-rpms
  rhel-8-baseos-rpms:
    conf:
      baseurl:
        ppc64le: https://rhsm-pulp.corp.redhat.com/content/dist/rhel8/8/ppc64le/baseos/os/
        s390x: https://rhsm-pulp.corp.redhat.com/content/dist/rhel8/8/s390x/baseos/os/
        x86_64: https://rhsm-pulp.corp.redhat.com/content/dist/rhel8/8/x86_64/baseos/os/
    content_set:
      default: rhel-8-for-x86_64-baseos-rpms
      ppc64le: rhel-8-for-ppc64le-baseos-rpms
      s390x: rhel-8-for-s390x-baseos-rpms
  rhel-8-appstream-rpms:
    conf:
      baseurl:
        ppc64le: https://rhsm-pulp.corp.redhat.com/content/dist/rhel8/8/ppc64le/appstream/os/
        s390x: https://rhsm-pulp.corp.redhat.com/content/dist/rhel8/8/s390x/appstream/os/
        x86_64: https://rhsm-pulp.corp.redhat.com/content/dist/rhel8/8/x86_64/appstream/os/
    content_set:
      default: rhel-8-for-x86_64-appstream-rpms
      ppc64le: rhel-8-for-ppc64le-appstream-rpms
      s390x: rhel-8-for-s390x-appstream-rpms
  rhel-8-beta-baseos-rpms:
    conf:
      baseurl:
        ppc64le: https://rhsm-pulp.corp.redhat.com/content/beta/rhel8/8/ppc64le/baseos/os/
        s390x: https://rhsm-pulp.corp.redhat.com/content/beta/rhel8/8/s390x/baseos/os/
        x86_64: https://rhsm-pulp.corp.redhat.com/content/beta/rhel8/8/x86_64/baseos/os/
    content_set:
      default: rhel-8-for-x86_64-baseos-rpms
      ppc64le: rhel-8-for-ppc64le-baseos-rpms
      s390x: rhel-8-for-s390x-baseos-rpms
  rhel-8-beta-appstream-rpms:
    conf:
      baseurl:
        ppc64le: https://rhsm-pulp.corp.redhat.com/content/beta/rhel8/8/ppc64le/appstream/os/
        s390x: https://rhsm-pulp.corp.redhat.com/content/beta/rhel8/8/s390x/appstream/os/
        x86_64: https://rhsm-pulp.corp.redhat.com/content/beta/rhel8/8/x86_64/appstream/os/
    content_set:
      default: rhel-8-for-x86_64-appstream-rpms
      ppc64le: rhel-8-for-ppc64le-appstream-rpms
      s390x: rhel-8-for-s390x-appstream-rpms
  rhel-9-baseos-rpms:
    conf:
      baseurl:
        ppc64le: https://rhsm-pulp.corp.redhat.com/content/eus/rhel9/9.4/ppc64le/baseos/os/
        s390x: https://rhsm-pulp.corp.redhat.com/content/eus/rhel9/9.4/s390x/baseos/os/
        x86_64: https://rhsm-pulp.corp.redhat.com/content/eus/rhel9/9.4/x86_64/baseos/os/
    content_set:
      default: rhel-9-for-x86_64-baseos-eus-rpms__9_DOT_4
      ppc64le: rhel-9-for-ppc64le-baseos-eus-rpms__9_DOT_4
      s390x: rhel-9-for-s390x-baseos-eus-rpms__9_DOT_4
  rhel-9-appstream-rpms:
    conf:
      baseurl:
        ppc64le: https://rhsm-pulp.corp.redhat.com/content/eus/rhel9/9.4/ppc64le/appstream/os/
        s390x: https://rhsm-pulp.corp.redhat.com/content/eus/rhel9/9.4/s390x/appstream/os/
        x86_64: https://rhsm-pulp.corp.redhat.com/content/eus/rhel9/9.4/x86_64/appstream/os/
    content_set:
      default: rhel-9-for-x86_64-appstream-eus-rpms__9_DOT_4
      ppc64le: rhel-9-for-ppc64le-appstream-eus-rpms__9_DOT_4
      s390x: rhel-9-for-s390x-appstream-eus-rpms__9_DOT_4
  rhel-server-ose-3.11-rpms:
    conf:
      baseurl:
        x86_64: https://rhsm-pulp.corp.redhat.com/content/dist/rhel/server/7/7Server/x86_64/ose/3.11/os/
    content_set:
      default: rhel-7-server-ose-3.11-rpms
    reposync:
      latest_only: false

default_image_build_method: imagebuilder
image_build_log_scanner:
  matches:
    # yum failed to install a package (but may not give an error result)
  - "No package .* available"
    # dnf failed to find a package to install:
  - "Error: Unable to find a match"
    # on multiarch builds, installed different NVR of pkg for different arches:
  - "Failed component comparison for components:.*"
    # docker does not understand multi-stage builds
  - "is not a valid repository/tag: invalid reference format"
    # indicative of https://github.com/openshift/imagebuilder/issues/87 or file(s) missing
  - "plugins.imagebuilder.*lstat.*no such file or directory"
    # koji sucks at auto-incrementing releases
  - "bump_release: BuildError.'Unable to increment release value:"
    # need to add the image component to whitelist building into candidate tag
  - "not in list for tag rhaos-.*-candidate"
  files:
  - x86_64.log
  - s390x.log
  - ppc64le.log
  - task_failed.log
  - orchestrator.log
scan_freshness:
  release_regex: '(?x) ^ (\d\d\d\d) (\d\d) (\d\d) (\d\d)'
  threshold_hours: 6
csv_namespace: openshift
