---

####################################################################################################
#  STOP. HOLD. PLEASE WAIT. PLEASE READ. FAILURE TO READ WILL HAVE IMPACTS ACROSS THE ORGANIZATION.
####################################################################################################
# If you are about to modify this file, please know that the end result may be changing the
# base images for all upstream CI.
#
# ******IF you are about to bump ART's golang version******
# Please announce to aos-devel/aos-leads before doing so. Tell them when it will occur and
# hold to that schedule so that new CI issues can be correlated with the event.
#
# ******IF you are about to change an upstream_image name******
# Do so only if discussed with your team lead. This field does not impact ART builds.
# When this field is changed, it will open upstream PRs for each image using the stream
# in ART's ocp-build-data. i.e. if you change the upstream_image for golang, you will
# indirectly be responsible for opening >150 upstream PRs.
# Details: https://docs.google.com/document/d/1vTf_Ev_9iv_myWu7ClYLlsiN54rEDIblq-90n3sNscs/edit
#
####################################################################################################

golang-1.19:
  image: openshift/golang-builder@sha256:f38f31aef24699bb3dac4f22dcd5692778e612d5ea69633e937756136c8f0176
  # Disabling mirroring until art6883 patch is permitted upstream.
  mirror: false
  # transform: rhel-8/golang
  # Leave this upstream information in place even if mirror/transform is disabled. Test Platform read the data.
  upstream_image_base: registry.ci.openshift.org/ocp/builder:rhel-8-golang-1.19-openshift-{MAJOR}.{MINOR}.art
  upstream_image: registry.ci.openshift.org/ocp/builder:rhel-8-golang-1.19-openshift-{MAJOR}.{MINOR}

golang:
  image: openshift/golang-builder@sha256:2ea0030fbc9bc9e65c5d20d0a447e51e7facbec3300456e7338b724d01e0f99e
  # Disabling mirroring until art6883 patch is permitted upstream.
  mirror: false
  # transform: rhel-8/golang
  # Leave this upstream information in place even if mirror/transform is disabled. Test Platform read the data.
  upstream_image_base: registry.ci.openshift.org/ocp/builder:rhel-8-golang-1.20-openshift-{MAJOR}.{MINOR}.art
  upstream_image: registry.ci.openshift.org/ocp/builder:rhel-8-golang-1.20-openshift-{MAJOR}.{MINOR}

rhel-9-golang-1.19:
  image: openshift/golang-builder@sha256:54204c4bacaec28330112f9401b290b67e95449ccb5c03676f01a5e315441112
  # Disabling mirroring until art6883 patch is permitted upstream.
  mirror: false
  # transform: rhel-9/golang
  # Leave this upstream information in place even if mirror/transform is disabled. Test Platform read the data.
  upstream_image_base: registry.ci.openshift.org/ocp/builder:rhel-9-golang-1.19-openshift-{MAJOR}.{MINOR}.art
  upstream_image: registry.ci.openshift.org/ocp/builder:rhel-9-golang-1.19-openshift-{MAJOR}.{MINOR}

rhel-9-golang:
  image: openshift/golang-builder@sha256:5ea8ea58e2c5bb9ecc6f3e10469fb884495f145b447362ac25de69a0f7f04075
  # Disabling mirroring until art6883 patch is permitted upstream.
  mirror: false
  # transform: rhel-9/golang
  # Leave this upstream information in place even if mirror/transform is disabled. Test Platform read the data.
  upstream_image_base: registry.ci.openshift.org/ocp/builder:rhel-9-golang-1.20-openshift-{MAJOR}.{MINOR}.art
  upstream_image: registry.ci.openshift.org/ocp/builder:rhel-9-golang-1.20-openshift-{MAJOR}.{MINOR}

# This image is not used by ART. It is an artifact required in upstream CI to build unit tests.
# Our transform is designed to create a buildconfig atop a specific golang version, layering on
# packages that upstream has traditionally had present in its build_roots.
rhel-8-golang-1.19-ci-build-root:
  image: not_applicable
  upstream_image_base: registry.ci.openshift.org/ocp/builder:rhel-8-golang-1.19-openshift-{MAJOR}.{MINOR}
  transform: rhel-8/ci-build-root
  upstream_image: registry.ci.openshift.org/openshift/release:rhel-8-release-golang-1.19-openshift-{MAJOR}.{MINOR}

# This image is not used by ART. It is an artifact required in upstream CI to build unit tests.
# Our transform is designed to create a buildconfig atop a specific golang version, layering on
# packages that upstream has traditionally had present in its build_roots.
rhel-8-golang-ci-build-root:
  image: not_applicable
  upstream_image_base: registry.ci.openshift.org/ocp/builder:rhel-8-golang-1.20-openshift-{MAJOR}.{MINOR}
  transform: rhel-8/ci-build-root
  upstream_image: registry.ci.openshift.org/openshift/release:rhel-8-release-golang-1.20-openshift-{MAJOR}.{MINOR}

# This image is not used by ART. It is an artifact required in upstream CI to build unit tests.
# Our transform is designed to create a buildconfig atop a specific golang version, layering on
# packages that upstream has traditionally had present in its build_roots.
rhel-9-golang-1.19-ci-build-root:
  image: not_applicable
  upstream_image_base: registry.ci.openshift.org/ocp/builder:rhel-9-golang-1.19-openshift-{MAJOR}.{MINOR}
  transform: rhel-9/ci-build-root
  upstream_image: registry.ci.openshift.org/openshift/release:rhel-9-release-golang-1.19-openshift-{MAJOR}.{MINOR}

# This image is not used by ART. It is an artifact required in upstream CI to build unit tests.
# Our transform is designed to create a buildconfig atop a specific golang version, layering on
# packages that upstream has traditionally had present in its build_roots.
rhel-9-golang-ci-build-root:
  image: not_applicable
  upstream_image_base: registry.ci.openshift.org/ocp/builder:rhel-9-golang-1.20-openshift-{MAJOR}.{MINOR}
  transform: rhel-9/ci-build-root
  upstream_image: registry.ci.openshift.org/openshift/release:rhel-9-release-golang-1.20-openshift-{MAJOR}.{MINOR}

# IMPORTANT: etcd has unique approval to track its own etcd version. Other repos need arch
# approval to diverge from what kube apiserver uses for a given release.
etcd_golang:
  image: openshift/golang-builder@sha256:94ffaf9717b065f631c9ac84677b81841fcd3cfc5b2988ffec8aa2884fe14fd1
  # Disabling mirroring until art6883 patch is permitted upstream.
  mirror: false
  # No transform required as etcd does not yum install any packages.
  # Leave this upstream information in place even if mirror/transform is disabled. Test Platform read the data.
  upstream_image_base: registry.ci.openshift.org/ocp/builder:rhel-8-etcd-golang-1.16
  upstream_image: registry.ci.openshift.org/ocp/builder:rhel-8-etcd-golang-1.16

# IMPORTANT: etcd has unique approval to track its own etcd version. Other repos need arch
# approval to diverge from what kube apiserver uses for a given release.
etcd_golang-1.19:
  image: openshift/golang-builder@sha256:f38f31aef24699bb3dac4f22dcd5692778e612d5ea69633e937756136c8f0176
  # Disabling mirroring until art6883 patch is permitted upstream.
  mirror: false
  # No transform required as etcd does not yum install any packages.
  # Leave this upstream information in place even if mirror/transform is disabled. Test Platform read the data.
  upstream_image_base: registry.ci.openshift.org/ocp/builder:rhel-8-etcd-golang-1.19
  upstream_image: registry.ci.openshift.org/ocp/builder:rhel-8-etcd-golang-1.19

rhel8:
  # the most recent release at present. since we yum update this, it does not need to float.
  # it is important that we not build from unreleased builds and publish them.
  # rhel-els-container-8.6-921
  image: registry-proxy.engineering.redhat.com/rh-osbs/rhel-els@sha256:ae88d68c3ba828bfac144a6561f9300af68fc5d6f332785e10e845cc2a48b2a3
  upstream_image: registry.ci.openshift.org/ocp/builder:rhel-8-openshift-{MAJOR}.{MINOR}.art
  mirror: true

rhel9:
  # the most recent release at present. since we yum update this, it does not need to float.
  # it is important that we not build from unreleased builds and publish them.
  # rhel-els-container-9.2-483
  image: registry-proxy.engineering.redhat.com/rh-osbs/rhel-els@sha256:cf1bc434a99f7fc6993ad728cbceb72528f031d0c93ea3d183f55728710c6c76
  upstream_image: registry.ci.openshift.org/ocp/builder:rhel-9-openshift-{MAJOR}.{MINOR}.art
  mirror: true

nodejs:
  image: ubi8/nodejs-16:1-82.1675799501
  upstream_image: registry.ci.openshift.org/ocp/builder:rhel-8-openshift-nodejs-base-{MAJOR}.{MINOR}.art
  mirror: true
