# Disable automated build because it is intended to be built after a release is promoted.
mode: disabled
# This field won't restrict building arches; it will only determine what arches will be published on mirror
arches:
- x86_64
- aarch64
content:
  source:
    git:
      branch:
        target: release-{MAJOR}.{MINOR}
      url: git@github.com:openshift-priv/microshift.git
    specfile: packaging/rpm/microshift.spec
    modifications:
    - action: command
      command: microshift-rebase
      env:
        RELEASE_NAME: "{release_name}"
        # Since there's no lvms for 4.14 yet and microshift doesn't require a specific version
        # of lvms-operator-bundle, hardcode v4.12 for now.
        # # https://github.com/openshift/microshift/blob/main/docs/rebase.md#getting-release-image-build-references
        LVMS_OPERATOR_BUNDLE: registry.access.redhat.com/lvms4/lvms-operator-bundle:v4.13.1-5
name: microshift
distgit:
  branch: rhaos-{MAJOR}.{MINOR}-rhel-9
targets:
- rhaos-{MAJOR}.{MINOR}-rhel-9-candidate
owners:
- microshift-devel@redhat.com
# This is used by microshift_sync job
rhel_targets:
- 9
